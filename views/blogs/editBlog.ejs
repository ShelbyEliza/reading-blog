<!DOCTYPE html>
<html lang="en">
  <%- include('../partials/head.ejs') %>
  <body>
    <%- include('../partials/header.ejs') %> <%- include('../partials/nav.ejs') %> 
    <div class="content">
      <h2 class="page-title">Edit post here!</h2>
      <div class="content-box">
        <form action="/blogs/edit/<%= blog.id %>" method="POST" id="edit-blog">

            <div class="form-row">
              <label for="bookTitle" class="label">Book Title</label>

              <input
                id="bookTitle"
                name="bookTitle"
                type="text"
                required="required" 
                value= "<%= blog.bookTitle %>"
              />
            </div>

          <div class="form-row">
            <label for="author" class="label">Author</label>

            <input
              id="author"
              name="author"
              type="text"
              value= "<%= blog.author %>"
              required="required"
            />
          </div>
  
<!-- TO DO: change date input value to show current date -->
          <div class="form-row">
            <label for="dateStarted">Started:</label>
            <input
            id="dateStarted"
            name="dateStarted"
            type="date"
            <% if (blog.dateStarted !== "") { %> 
              value="<%= blog.dateStarted %>"
              <% } else { %> 
                value="2021-10-15"
              <% }  %> 
            min="1992-11-16"
            max="2092-11-16"
            />
          </div>

          <div class="form-row">
            <label for="dateFinished">Finished:</label>
            <input
            id="dateFinished"
            name="dateFinished"
            type="date"
            <% if (blog.dateFinished !== "") { %> 
              value="<%= blog.dateFinished %>"
              <% } else { %> 
                value="2021-10-15"
              <% }  %> 
            min="1992-11-16"
            max="2092-11-16"
            />
          </div>

          <div class="form-row-full">
            <fieldset>
                <legend>Tags:</legend>
                <% const tagList = blog.tags %> 
              <div class="tag-option">
                <input type="checkbox" id="sci-fi" name="tags" value="Sci-fi"
                <% if(tagList.includes("Sci-fi")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="sci-fi">Sci-fi</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="fantasy" name="tags" value="Fantasy"
                <% if(tagList.includes("Fantasy")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="fantasy">Fantasy</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="informative" name="tags" value="Informative"
                <% if(tagList.includes("Informative")){ %>
                  checked="true"
                <% } %> >
                <label for="informative">Informative</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="fiction" name="tags" value="Fiction"
                <% if(tagList.includes("Fiction")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="fiction">Fiction</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="short-story" name="tags" value="Short Story"
                <% if(tagList.includes("Short Story")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="short-story">Short Story</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="non-fiction" name="tags" value="Non-fiction"
                <% if(tagList.includes("Non-fiction")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="non-fiction">Non-fiction</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="biography" name="tags" value="Biography"
                <% if(tagList.includes("Biography")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="biography">Biography</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="classical" name="tags" value="Classical"
                <% if(tagList.includes("Classical")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="classical">Classical</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="comedy" name="tags" value="Comedy"
                <% if(tagList.includes("Comedy")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="comedy">Comedy</label>
              </div>
              <div class="tag-option">
                <input type="checkbox" id="horror" name="tags" value="Horror"
                <% if(tagList.includes("Horror")){ %>
                  checked="true"
                <% } %> 
                >
                <label for="horror">Horror</label>
              </div>
            </fieldset>
          </div> 


          <div class="form-row-full">
            <label for="blogContent" class="label"
              >Your Thoughts on the Book:</label
            >
            </div>

            <textarea 
            id="blogContent" 
            name="blogContent"
            spellcheck="true"
            required="required"><%= blog.blogContent %></textarea>

          </form>
          <button form="edit-blog">Update!</button>
      </div>
    </div>
    <%- include('../partials/footer.ejs')%>
  </body>
</html>